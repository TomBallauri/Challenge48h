<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Vitesse de Frappe</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #timer { position: absolute; top: 10px; right: 10px; font-size: 18px; font-weight: bold; }
        #phrase { font-size: 18px; margin: 20px; width: 80%; margin-left: auto; margin-right: auto; text-align: justify; }
        #input { font-size: 16px; width: 80%; padding: 10px; }
        button { font-size: 16px; margin: 10px; padding: 10px; cursor: pointer; }
        #smallMessage { font-size: 8px; position: absolute; bottom: 5px; right: 5px; color: #d7d7d7d5; display: none; }
        #nextButton { display: none; font-size: 16px; padding: 10px; margin: 10px; cursor: pointer; }
        #validateButton { display: none; font-size: 16px; padding: 10px; margin: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="timer">Temps: 200.00s</div>
    <h1>Test de Vitesse de Frappe</h1>
    <p id="phrase">Cliquez sur "Commencer" pour débuter</p>
    <input type="text" id="input" placeholder="Tapez ici..." disabled>
    <br>
    <button id="startButton" onclick="startGame()">Commencer</button>
    <button id="validateButton" onclick="checkTyping()">Valider</button>
    <p id="result"></p>
    <p id="smallMessage">Il faut entrer le mot "Porte".</p>
    <button id="nextButton" onclick="goToNextPage()">Suivant</button>

    <script>
        const phrase = "Dans un monde lointain, où les montagnes touchaient presque le ciel et les forêts semblaient cacher des secrets anciens, un voyageur solitaire se lança dans une aventure périlleuse. Chaque étape le rapprochait des mystères cachés, et chaque nouveau chemin semblait mener à un horizon inconnu. Les nuits étaient froides et les jours pleins de découvertes surprenantes, mais il avançait sans relâche, guidé par une vision qui ne cessait de grandir. C'était un défi, mais il savait qu'au bout de ce voyage, un trésor inestimable l'attendait. À la fin de son périple, il avait enfin trouvé ce qu'il cherchait, regardez en bas a droite de l'écran, mais il ne pouvait s'empêcher de penser aux leçons apprises sur le chemin.";

        const correctWord = "Porte"; // Le mot à entrer pour valider

        let startTime, timerInterval;

        function startGame() {
            document.getElementById("phrase").innerText = phrase;
            document.getElementById("input").value = "";
            document.getElementById("input").disabled = false;
            document.getElementById("input").focus();
            document.getElementById("startButton").style.display = "none";
            document.getElementById("smallMessage").style.display = "block";
            document.getElementById("validateButton").style.display = "inline-block"; // Affiche le bouton Valider
            
            startTime = new Date().getTime();
            let timeLeft = 200;
            document.getElementById("timer").innerText = `Temps: ${timeLeft.toFixed(2)}s`;
            
            clearInterval(timerInterval);

            timerInterval = setInterval(() => {
                const elapsedTime = (new Date().getTime() - startTime) / 1000;
                timeLeft = 200 - elapsedTime;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById("result").innerText = "Temps écoulé ! Vous avez perdu.";
                    document.getElementById("input").disabled = true;
                } else {
                    document.getElementById("timer").innerText = `Temps: ${timeLeft.toFixed(2)}s`;
                }
            }, 100);
        }

        function checkTyping() {
            clearInterval(timerInterval);
            const endTime = new Date().getTime();
            const userInput = document.getElementById("input").value;
            
            if (userInput === correctWord) {
                const elapsedTime = (endTime - startTime) / 1000;
                const wordsPerMinute = (phrase.split(" ").length / elapsedTime) * 60;
                document.getElementById("result").innerText = `Bravo !\nTemps: ${elapsedTime.toFixed(2)} sec\nVitesse: ${wordsPerMinute.toFixed(2)} mots/min`;
                
                // Affichage du bouton "Suivant"
                document.getElementById("nextButton").style.display = "inline-block";
            } else {
                document.getElementById("result").innerText = "Erreur : le mot n'est pas correct !";
            }
        }

        // Ajouter la possibilité de valider avec la touche 'Entrée'
        document.getElementById("input").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                checkTyping();
            }
        });

        function goToNextPage() {
            window.location.href = "nextPage.html";  // Remplacer "nextPage.html" par l'URL de la page suivante
        }
    </script>
</body>
</html>
